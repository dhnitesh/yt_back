<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube to MP3 Downloader</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="bg-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
    </div>
    
    <div class="container">
        <div class="row justify-content-center min-vh-100 align-items-center py-5">
            <div class="col-12 col-lg-10 col-xl-8">
                <!-- Header Section -->
                <div class="text-center mb-5">
                    <div class="logo-container mb-4">
                        <div class="logo-icon">
                            <i class="fab fa-youtube"></i>
                            <i class="fas fa-arrow-right"></i>
                            <i class="fas fa-music"></i>
                        </div>
                    </div>
                    <h1 class="main-title mb-3">YouTube to MP3 Converter</h1>
                    <p class="subtitle">Transform your favorite YouTube videos into high-quality MP3 files</p>
                </div>

                <!-- Search or Download Toggle -->
                <div class="mode-toggle-container mb-4">
                    <div class="mode-toggle-wrapper">
                        <div class="mode-toggle-header">
                            <h5><i class="fas fa-cog"></i> Choose Mode</h5>
                            <p class="mode-description">Select how you want to find your videos</p>
                            <div class="current-mode-indicator">
                                <span id="currentModeText">Current: Direct URL Mode</span>
                            </div>
                        </div>
                        <div class="mode-toggle-buttons">
                            <input type="radio" class="btn-check" name="mode" id="searchMode" autocomplete="off">
                            <label class="btn btn-mode-toggle" for="searchMode">
                                <div class="mode-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="mode-text">
                                    <strong>Search Videos</strong>
                                    <small>Find videos by keywords</small>
                                </div>
                            </label>
                            
                            <input type="radio" class="btn-check" name="mode" id="downloadMode" autocomplete="off" checked>
                            <label class="btn btn-mode-toggle" for="downloadMode">
                                <div class="mode-icon">
                                    <i class="fas fa-link"></i>
                                </div>
                                <div class="mode-text">
                                    <strong>Direct URL</strong>
                                    <small>Paste YouTube URL</small>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Main Card -->
                <div class="main-card">
                    <div class="glass-card">
                        <div class="card-content">
                            <!-- Search Section -->
                            <div id="searchSection" class="section-container" style="display: none;">
                                <div class="search-form mb-4">
                                    <div class="input-group-container">
                                        <label for="searchQuery" class="form-label">
                                            <i class="fas fa-search"></i> Search YouTube
                                        </label>
                                        <div class="input-wrapper">
                                            <input type="text" class="form-control modern-input" id="searchQuery" 
                                                   placeholder="Search for music, videos, artists..." required>
                                            <div class="input-icon">
                                                <i class="fas fa-search"></i>
                                            </div>
                                        </div>
                                        <div class="form-text">Enter keywords to search for YouTube videos</div>
                                    </div>
                                    <div class="action-buttons mt-3">
                                        <button type="button" class="btn btn-search" id="searchBtn">
                                            <i class="fas fa-search"></i>
                                            <span>Search Videos</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Search Results -->
                                <div id="searchResults" class="search-results" style="display: none;">
                                    <div class="section-header">
                                        <h5><i class="fas fa-list"></i> Search Results</h5>
                                    </div>
                                    <div id="searchResultsList" class="results-list">
                                        <!-- Search results will be populated here -->
                                    </div>
                                </div>
                            </div>

                            <!-- URL Input Form -->
                            <div id="downloadSection">
                                <form id="downloadForm" class="download-form">
                                <div class="input-group-container mb-4">
                                    <label for="url" class="form-label">
                                        <i class="fab fa-youtube"></i> YouTube URL
                                    </label>
                                    <div class="input-wrapper">
                                        <input type="url" class="form-control modern-input" id="url" 
                                               placeholder="Paste your YouTube video or playlist URL here..." required>
                                        <div class="input-icon">
                                            <i class="fas fa-link"></i>
                                        </div>
                                    </div>
                                    <div class="form-text">Enter a YouTube video or playlist URL to convert to MP3</div>
                                </div>
                                
                                <div class="settings-container mb-4">
                                    <div class="row g-3">
                                        <div class="col-md-8">
                                            <label for="quality" class="form-label">
                                                <i class="fas fa-sliders-h"></i> Audio Quality
                                            </label>
                                            <select class="form-select modern-select" id="quality">
                                                <option value="320">üî• 320 kbps - Premium Quality</option>
                                                <option value="256">‚≠ê 256 kbps - High Quality</option>
                                                <option value="192" selected>‚ú® 192 kbps - Good Quality</option>
                                                <option value="128">üìª 128 kbps - Standard Quality</option>
                                                <option value="96">üíø 96 kbps - Basic Quality</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 d-flex align-items-end">
                                            <div class="info-badge">
                                                <i class="fas fa-info-circle"></i>
                                                <span>MP3 Format</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button type="button" class="btn btn-preview" id="previewBtn">
                                        <i class="fas fa-eye"></i>
                                        <span>Preview Info</span>
                                    </button>
                                    <button type="submit" class="btn btn-download">
                                        <i class="fas fa-download"></i>
                                        <span>Download MP3</span>
                                    </button>
                                </div>
                            </form>
                            </div>
                            
                            <!-- Preview Section -->
                            <div id="previewSection" class="section-container" style="display: none;">
                                <div class="section-card preview-card">
                                    <div class="section-header">
                                        <h5><i class="fas fa-music"></i> Audio Preview</h5>
                                    </div>
                                    <div class="section-content" id="previewContent">
                                        <!-- Preview content will be loaded here -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Download Status -->
                            <div id="downloadStatus" class="section-container" style="display: none;">
                                <div class="section-card status-card">
                                    <div class="section-header">
                                        <h5><i class="fas fa-tasks"></i> Conversion Progress</h5>
                                    </div>
                                    <div class="section-content">
                                        <div class="status-info mb-3">
                                            <span class="status-label">Status:</span>
                                            <span id="status" class="status-badge">Starting...</span>
                                        </div>
                                        <div class="progress-container mb-3">
                                            <div class="progress modern-progress">
                                                <div id="progressBar" class="progress-bar progress-bar-animated" 
                                                     role="progressbar" style="width: 0%">
                                                    <span class="progress-text">0%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="downloadInfo" class="download-info"></div>
                                        <div id="downloadActions" class="download-actions" style="display: none;">
                                            <button id="downloadFileBtn" class="btn btn-success-modern">
                                                <i class="fas fa-download"></i> Download Files
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Error Display -->
                            <div id="errorSection" class="section-container error-section" style="display: none;">
                                <div class="error-card">
                                    <div class="error-icon">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div class="error-content">
                                        <h5>Something went wrong</h5>
                                        <p id="errorMessage"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="features-grid mt-5">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h6>Lightning Fast</h6>
                        <p>Quick conversion with optimized processing</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h6>Secure & Private</h6>
                        <p>Your data stays safe and private</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-music"></i>
                        </div>
                        <h6>High Quality</h6>
                        <p>Premium audio quality up to 320kbps</p>
                    </div>
                </div>

                <!-- Collapsible Help Section -->
                <div class="help-section mt-5">
                    <div class="accordion modern-accordion" id="helpAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingInstructions">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapseInstructions" aria-expanded="false">
                                    <i class="fas fa-question-circle me-2"></i>
                                    How to Use
                                </button>
                            </h2>
                            <div id="collapseInstructions" class="accordion-collapse collapse" 
                                 data-bs-parent="#helpAccordion">
                                <div class="accordion-body">
                                    <div class="steps-container">
                                        <div class="step">
                                            <div class="step-number">1</div>
                                            <div class="step-content">
                                                <h6>Copy YouTube URL</h6>
                                                <p>Find your favorite video or playlist on YouTube and copy the URL</p>
                                            </div>
                                        </div>
                                        <div class="step">
                                            <div class="step-number">2</div>
                                            <div class="step-content">
                                                <h6>Paste & Configure</h6>
                                                <p>Paste the URL and select your preferred audio quality</p>
                                            </div>
                                        </div>
                                        <div class="step">
                                            <div class="step-number">3</div>
                                            <div class="step-content">
                                                <h6>Download</h6>
                                                <p>Click download and wait for your MP3 files to be ready</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTrouble">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapseTrouble" aria-expanded="false">
                                    <i class="fas fa-tools me-2"></i>
                                    Troubleshooting
                                </button>
                            </h2>
                            <div id="collapseTrouble" class="accordion-collapse collapse" 
                                 data-bs-parent="#helpAccordion">
                                <div class="accordion-body">
                                    <div class="trouble-item">
                                        <h6><i class="fas fa-exclamation-circle text-warning"></i> API Errors</h6>
                                        <p>If you encounter API errors, wait a few minutes and try again. Some videos may have restrictions.</p>
                                    </div>
                                    <div class="trouble-item">
                                        <h6><i class="fas fa-ban text-danger"></i> Download Issues</h6>
                                        <p>Check if the video is private, deleted, or age-restricted. Try a different quality setting.</p>
                                    </div>
                                    <div class="trouble-item">
                                        <h6><i class="fas fa-link text-info"></i> Supported URLs</h6>
                                        <p>We support standard YouTube video and playlist URLs from youtube.com and youtu.be</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Legal Notice -->
                <div class="legal-notice mt-4">
                    <div class="notice-content">
                        <i class="fas fa-balance-scale"></i>
                        <p>Please respect copyright laws and only download content you have permission to use.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>
